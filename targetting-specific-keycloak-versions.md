# ðŸŽ¯ Targetting Specific Keycloak Versions

By defaullt, Keycloakify generates multiples jar files, each one meant to be used with a given Keycloak version range.

<figure><img src=".gitbook/assets/image (21).png" alt="" width="315"><figcaption><p>files generated by 'keycloakify build' by default</p></figcaption></figure>

However you might want to customize this behavior.  If you know ahead of time what Keycloak you theme will using you can build only for this version using the `keycloakVersionTargets` build option.

{% tabs %}
{% tab title="Vite" %}
<pre class="language-typescript" data-title="vite.config.ts"><code class="lang-typescript">import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import { keycloakify } from "keycloakify/vite-plugin";

// https://vitejs.dev/config/
export default defineConfig({
    plugins: [react(), keycloakify({
<strong>        keycloakVersionTargets: {
</strong><strong>            hasAccountTheme: true,
</strong><strong>            "21-and-below": false,
</strong><strong>            "23": true,
</strong><strong>            "24": false,
</strong><strong>            "25-and-above": false
</strong><strong>        }
</strong>    })]
});
</code></pre>
{% endtab %}

{% tab title="Webpack" %}
<pre class="language-json" data-title="package.json"><code class="lang-json">{
    "keycloakify": {
<strong>        "keycloakVersionTargets": {
</strong><strong>            "hasAccountTheme": true,
</strong><strong>            "21-and-below": false,
</strong><strong>            "23": true,
</strong><strong>            "24": false,
</strong><strong>            "25-and-above": false
</strong><strong>        }
</strong>    }
}
</code></pre>
{% endtab %}
{% endtabs %}

In this configuration only the `keycloak-theme-for-kc-23.jar` will be created by `npx keycloakify build`.

You can also define the file names of the generated jar files, example:

```javascript
{
    hasAccountTheme: true,
    "21-and-below": false,
    "23": false,
    "24": false,
    "25-and-above": "keycloak-theme.jar"
}
```

In the above configuration, only one jar will be generated: `keycloak-theme.jar` and it will be the one for use with Keycloak 25 and above.

### Removing the account theme

If you don't customize [the pages of the account theme](https://storybook.keycloakify.dev/?path=/story/account-account--default), you are encouraged to remove the account theme sources files from your project, you'll be able to target larger Keycloak version range with a single jar file, the build time will be faster and the jar will be smaller. &#x20;

To remove the account theme:

Start by deleting the src/account directory from your project

<figure><img src=".gitbook/assets/image (22).png" alt=""><figcaption></figcaption></figure>

Then update your src/main.tsx (or src/index.tsx)

<pre class="language-diff" data-title="src/main.tsx"><code class="lang-diff"> import { createRoot } from "react-dom/client";
 import { StrictMode, lazy, Suspense } from "react";
 
 const KcLoginThemePage = lazy(() => import("./login/KcPage"));
 const KcAccountThemePage = lazy(() => import("./account/KcPage"));
 
 createRoot(document.getElementById("root")!).render(
     &#x3C;StrictMode>
         &#x3C;Suspense>
             {(() => {
                 switch (window.kcContext?.themeType) {
                     case "login":
                         return &#x3C;KcLoginThemePage kcContext={window.kcContext} />;
<strong>-                    case "account":
</strong><strong>-                        return &#x3C;KcAccountThemePage kcContext={window.kcContext} />;
</strong>                 }
                 return &#x3C;h1>No Keycloak Context&#x3C;/h1>;
             })()}
         &#x3C;/Suspense>
     &#x3C;/StrictMode>
 );
 
 declare global {
     interface Window {
         kcContext?:
             | import("./login/KcContext").KcContext
<strong>-            | import("./account/KcContext").KcContext;
</strong>     }
 }
</code></pre>

If it was defined, update your keycloakVersionTargets Keycloakify build option. &#x20;

{% tabs %}
{% tab title="Vite" %}
<pre class="language-tsx" data-title="vite.config.ts"><code class="lang-tsx">import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import { keycloakify } from "keycloakify/vite-plugin";

// https://vitejs.dev/config/
export default defineConfig({
    plugins: [react(), keycloakify({
<strong>        keycloakVersionTargets: {
</strong><strong>            hasAccountTheme: false,
</strong><strong>            "21-and-below": false,
</strong><strong>            "22-and-above": true
</strong><strong>        }
</strong>    })]
});
</code></pre>
{% endtab %}

{% tab title="Webpack" %}
<pre class="language-json" data-title="package.json"><code class="lang-json">{
    "keycloakify": {
<strong>        "keycloakVersionTargets": {
</strong><strong>            "hasAccountTheme": false,
</strong><strong>            "21-and-below": false,
</strong><strong>            "22-and-above": true
</strong><strong>        }
</strong>    }
}
</code></pre>
{% endtab %}
{% endtabs %}

Note that the `hasAccountTheme` is not authoritative. What determines if you implement an account theme or not is the existence of an account directory in your sources. This property is just used to give you correct typing for the keycloak ranges availabes.
